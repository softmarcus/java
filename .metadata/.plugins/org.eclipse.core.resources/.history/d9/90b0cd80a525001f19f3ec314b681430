package com.softgraf.farmacia.controller;

import static com.softgraf.farmacia.view.Teclado.lerInt;
import static com.softgraf.farmacia.view.Teclado.msg;

import java.sql.Connection;
import java.sql.SQLException;

import com.softgraf.farmacia.model.Cliente;
import com.softgraf.farmacia.model.Estoque;
import com.softgraf.farmacia.model.Produto;
import com.softgraf.farmacia.model.dao.ConexaoBD;
import com.softgraf.farmacia.model.dao.ProdutoDAO;
import com.softgraf.farmacia.view.ClienteView;
import com.softgraf.farmacia.view.ProdutoView;

import ClienteRepository.ClienteRepository;

public class Principal {

	public static void main(String[] args) throws SQLException {

		ConexaoBD bd = new ConexaoBD();
		Connection conexao = bd.conectar();

		ProdutoDAO dao = new ProdutoDAO(conexao);
		dao.criarTabela();

		Estoque estoque = Estoque.getInstancia();
		ClienteRepository clienteRepository = ClienteRepository.getInstancia();
		
		int opcao = 0;

		do {
			msg("\n========= Sistema e FARMACIA V 1.0 =============s");
			msg("1= cadastrar produto");
			msg("2 = cadastrar cliente");
			msg("3 = cadastrar pedido");
			msg("4 = listar produtos cadastrados");
			msg("5 = buscar produto por codigo");
			msg("6 = remover produto por codigo");
			msg("7 = lista clientes cadastrados");
			msg("8 = Buscar cliente por nome");
			msg("9 = sair do sistema");

			opcao = lerInt("escolha");

			switch (opcao) {
			case 1:
				Produto p = ProdutoView.cadastrar();
				estoque.addProduto(p);
				System.out.println("\n produto cadastrado com sucesso!\n");
				break;
				
			case 2:
				Cliente c = ClienteView.cadastrar();
				clienteRepository.addCliente(c);
				System.out.println("\n Cliente cadastrado com sucesso!\n");
				break;
				
			case 3:
				System.out.println("castrando pedido");
				break;
			case 4:
				ProdutoView.listar(estoque);
				break;
			case 5:
				ProdutoView.buscar(estoque);
				break;
			case 6:
				ProdutoView.remover(estoque);
				break;
			case 7:
				ClienteView.listar(clienteRepository);
				break;
			case 8:
				ClienteView.buscar(clienteRepository);
				break;
			case 9:
				System.out.println("adeus!!!!");
				break;
			default:
				System.out.println("opcao invalida");
				break;
			}

		} while (opcao != 9);

		// Continua...

		bd.fecharConexao(conexao);
	}

}
